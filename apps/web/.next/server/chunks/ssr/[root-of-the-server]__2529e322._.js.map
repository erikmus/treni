{"version":3,"sources":["../../../../../../apps/web/src/components/settings/profile-form.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/src/app/dashboard/settings/profile/sync-locale.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/src/app/dashboard/settings/profile/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProfileForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProfileForm() from the server but ProfileForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/settings/profile-form.tsx\",\n    \"ProfileForm\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SyncLocale = registerClientReference(\n    function() { throw new Error(\"Attempted to call SyncLocale() from the server but SyncLocale is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/app/dashboard/settings/profile/sync-locale.tsx\",\n    \"SyncLocale\",\n);\n","import { redirect } from \"next/navigation\";\nimport { cookies } from \"next/headers\";\nimport { getTranslations } from \"next-intl/server\";\nimport { createClient } from \"@/lib/supabase/server\";\nimport { ProfileForm } from \"@/components/settings/profile-form\";\nimport { SyncLocale } from \"./sync-locale\";\n\nexport default async function ProfilePage() {\n  const supabase = await createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n\n  if (!user) {\n    redirect(\"/login\");\n  }\n\n  // Fetch user profile\n  const { data: profile } = await supabase\n    .from(\"profiles\")\n    .select(\"*\")\n    .eq(\"id\", user.id)\n    .single();\n\n  // Check if cookie needs to be synced with database\n  const cookieStore = await cookies();\n  const currentCookieLocale = cookieStore.get(\"NEXT_LOCALE\")?.value;\n  const dbLocale = profile?.locale || \"nl\";\n  const needsSync = currentCookieLocale !== dbLocale;\n\n  const t = await getTranslations(\"settings.profile\");\n\n  return (\n    <div className=\"max-w-2xl\">\n      {/* Sync locale cookie with database if needed */}\n      {needsSync && <SyncLocale locale={dbLocale} />}\n      \n      <div className=\"mb-6\">\n        <h2 className=\"text-xl font-semibold\">{t(\"title\")}</h2>\n        <p className=\"text-muted-foreground text-sm\">\n          {t(\"subtitle\")}\n        </p>\n      </div>\n\n      <ProfileForm \n        profile={{\n          id: user.id,\n          email: user.email || profile?.email || \"\",\n          full_name: profile?.full_name || \"\",\n          avatar_url: profile?.avatar_url || \"\",\n          locale: profile?.locale || \"nl\",\n          distance_unit: profile?.distance_unit || \"km\",\n          experience_level: profile?.experience_level || null,\n          weekly_available_hours: profile?.weekly_available_hours || 5,\n          preferred_run_days: profile?.preferred_run_days || [\"tuesday\", \"thursday\", \"saturday\"],\n        }}\n      />\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"2XAEO,IAAM,EAAc,CAAA,EAAA,AAD3B,EAAA,CAAA,CAAA,OAC2B,uBAAA,AAAuB,EAC9C,WAAa,MAAM,AAAI,MAAM,oOAAsO,EACnQ,kFACA,gEAHG,IAAM,EAAc,CAAA,EAAA,AAD3B,EAAA,CAAA,CAAA,OAC2B,uBAAA,AAAuB,EAC9C,WAAa,MAAM,AAAI,MAAM,oOAAsO,EACnQ,8DACA,0HCHG,IAAM,EAAa,CAAA,EAD1B,AAC0B,EAD1B,CAAA,CAAA,OAC0B,uBAAuB,AAAvB,EACtB,WAAa,MAAM,AAAI,MAAM,kOAAoO,EACjQ,4FACA,6DAHG,IAAM,EAAa,CAAA,EAD1B,AAC0B,EAD1B,CAAA,CAAA,OAC0B,uBAAA,AAAuB,EAC7C,WAAa,MAAU,AAAJ,MAAU,kOAAoO,EACjQ,wEACA,yICLJ,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAC7B,CAAE,KAAM,CAAE,MAAI,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,EAElD,CAAC,GACH,CAAA,EAAA,AADS,EACT,QAAA,AAAQ,EAAC,UAIX,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,KAAM,EAAK,EAAE,EAChB,MAAM,GAGH,EAAc,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,IAC3B,EAAsB,EAAY,GAAG,CAAC,gBAAgB,MACtD,EAAW,GAAS,QAAU,KAG9B,EAAI,MAAM,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,oBAEhC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEZ,AAPa,IAAwB,GAOxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,OAAQ,IAElC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAyB,EAAE,WACzC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAE,iBAIP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CACV,QAAS,CACP,GAAI,EAAK,EAAE,CACX,MAAO,EAAK,KAAK,EAAI,GAAS,OAAS,GACvC,UAAW,GAAS,WAAa,GACjC,WAAY,GAAS,YAAc,GACnC,OAAQ,GAAS,QAAU,KAC3B,cAAe,GAAS,eAAiB,KACzC,iBAAkB,GAAS,kBAAoB,KAC/C,uBAAwB,GAAS,wBAA0B,EAC3D,mBAAoB,GAAS,oBAAsB,CAAC,UAAW,WAAY,WAAW,AACxF,MAIR","ignoreList":[0,1]}