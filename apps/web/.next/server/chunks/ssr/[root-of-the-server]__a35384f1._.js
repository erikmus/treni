module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},34005,a=>{a.n(a.i(77930))},85517,a=>{a.n(a.i(63244))},28233,a=>{a.n(a.i(38545))},89412,a=>{a.n(a.i(93772))},50575,a=>{a.n(a.i(74137))},11688,a=>{"use strict";let b=(0,a.i(24046).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],11688)},542,a=>{"use strict";var b=a.i(89576),c=a.i(56624);a.i(56863);var d=a.i(56905),e=a.i(95650),f=a.i(24046);let g=(0,f.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),h=(0,f.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var i=a.i(11688);let j=(0,f.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);async function k({searchParams:a}){let f=(await a).authorization_id,k=await (0,e.getTranslations)("oauth");if(!f)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,b.jsx)("div",{className:"mb-6 inline-flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:(0,b.jsx)(j,{className:"h-8 w-8 text-destructive"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:k("error")}),(0,b.jsx)("p",{className:"text-muted-foreground",children:k("missingAuthId")})]})});let l=await (0,c.createClient)(),{data:{user:m}}=await l.auth.getUser();m||(0,d.redirect)(`/login?redirect=/oauth/consent?authorization_id=${f}`);let{data:n,error:o}=await l.auth.oauth.getAuthorizationDetails(f);if(o||!n)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,b.jsx)("div",{className:"mb-6 inline-flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:(0,b.jsx)(j,{className:"h-8 w-8 text-destructive"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:k("invalidRequest")}),(0,b.jsx)("p",{className:"text-muted-foreground",children:o?.message||k("invalidAuthRequest")})]})});let p=n.scope?n.scope.split(" ").filter(Boolean):[];return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"mb-6 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:(0,b.jsx)(g,{className:"h-8 w-8 text-primary"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:k("authorize",{app:n.client.name})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:k("wantsAccess")})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-lg",children:[(0,b.jsx)("div",{className:"mb-6 pb-6 border-b border-border",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-lg bg-muted flex items-center justify-center shrink-0",children:(0,b.jsx)("span",{className:"text-lg font-bold text-muted-foreground",children:n.client.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("h2",{className:"font-semibold text-foreground truncate",children:n.client.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[(0,b.jsx)(h,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"truncate",children:n.redirect_url})]})]})]})}),p.length>0&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-foreground mb-3",children:k("requestsPermission")}),(0,b.jsx)("ul",{className:"space-y-2",children:p.map(a=>(0,b.jsxs)("li",{className:"flex items-center gap-3 text-sm",children:[(0,b.jsx)("div",{className:"h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:(0,b.jsx)(i.Check,{className:"h-3.5 w-3.5 text-primary"})}),(0,b.jsx)("span",{className:"text-muted-foreground",children:k.has(`scopes.${a}`)?k(`scopes.${a}`):a})]},a))})]}),(0,b.jsxs)("div",{className:"mb-6 p-3 bg-muted/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:k("loggedInAs")}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:m.email})]}),(0,b.jsxs)("form",{action:"/api/oauth/decision",method:"POST",className:"space-y-3",children:[(0,b.jsx)("input",{type:"hidden",name:"authorization_id",value:f}),(0,b.jsx)("button",{type:"submit",name:"decision",value:"approve",className:"w-full py-3 px-4 bg-primary text-primary-foreground font-medium rounded-lg hover:bg-primary/90 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:k("allow")}),(0,b.jsx)("button",{type:"submit",name:"decision",value:"deny",className:"w-full py-3 px-4 bg-secondary text-secondary-foreground font-medium rounded-lg hover:bg-secondary/80 transition-colors focus:outline-none focus:ring-2 focus:ring-secondary focus:ring-offset-2",children:k("deny")})]})]}),(0,b.jsxs)("p",{className:"text-center text-xs text-muted-foreground mt-6",children:[k("consentFooter")," ",(0,b.jsx)("span",{className:"underline",children:k("privacyPolicy")}),"."]})]})})}a.s(["default",()=>k],542)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a35384f1._.js.map