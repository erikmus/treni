module.exports=[18969,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call PersonalRecords() from the server but PersonalRecords is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/stats/personal-records.tsx <module evaluation>","PersonalRecords");a.s(["PersonalRecords",0,b])},34772,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call PersonalRecords() from the server but PersonalRecords is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/stats/personal-records.tsx","PersonalRecords");a.s(["PersonalRecords",0,b])},81191,a=>{"use strict";a.i(18969);var b=a.i(34772);a.n(b)},22247,a=>{"use strict";var b=a.i(89576);a.i(56863);var c=a.i(56905),d=a.i(37816),e=a.i(54413),f=a.i(38906),g=a.i(3124),h=a.i(65033),i=a.i(70414),j=a.i(8768),k=a.i(23944),l=a.i(13420),m=a.i(73513),n=a.i(95650),o=a.i(89695),p=a.i(24046);let q=(0,p.default)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),r=(0,p.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),s=(0,p.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var t=a.i(22705),u=a.i(54465);let v=(0,p.default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]);var w=a.i(83793),x=a.i(86536),y=a.i(61037),z=a.i(96106),A=a.i(56624),B=a.i(28472),C=a.i(81191);function D(a,b){let c=Math.floor(a/60),d=Math.round(a%60);return c>0?"nl"===b?`${c}u ${d}m`:`${c}h ${d}m`:`${d}m`}function E(a){let b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=a%60;return b>0?`${b}:${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${c}:${d.toString().padStart(2,"0")}`}async function F(){let a=await (0,A.createClient)(),{data:{user:p}}=await a.auth.getUser(),F=await (0,n.getTranslations)("stats"),G=await (0,o.getLocale)(),H="nl"===G?l.nl:m.enUS;p||(0,c.redirect)("/login");let{data:I}=await a.from("user_stats").select("*").eq("user_id",p.id).order("recorded_at",{ascending:!1}).limit(1).single(),J=(0,f.subDays)(new Date,30).toISOString(),{data:K}=await a.from("activities").select("*").eq("user_id",p.id).eq("activity_type","run").gte("started_at",J).order("started_at",{ascending:!1}),{data:L}=await a.from("workouts").select("*").eq("user_id",p.id).order("scheduled_date",{ascending:!1}),M=(0,g.startOfWeek)(new Date,{weekStartsOn:1}),N=(0,h.endOfWeek)(new Date,{weekStartsOn:1}),O=(0,f.subDays)(M,7),P=(0,f.subDays)(M,1),Q=K?.filter(a=>{let b=new Date(a.started_at);return b>=M&&b<=N})||[],R=K?.filter(a=>{let b=new Date(a.started_at);return b>=O&&b<=P})||[],S=Q.reduce((a,b)=>a+(Number(b.distance_meters)||0),0)/1e3,T=R.reduce((a,b)=>a+(Number(b.distance_meters)||0),0)/1e3,U=T>0?Math.round((S-T)/T*100):0,V=Q.reduce((a,b)=>a+(b.duration_seconds||0),0)/60,W=R.reduce((a,b)=>a+(b.duration_seconds||0),0)/60,X=W>0?Math.round((V-W)/W*100):0,Y=L?.filter(a=>{let b=new Date(a.scheduled_date);return"completed"===a.status&&b>=M&&b<=N}).length||0,Z=new Set(K?.map(a=>(0,e.format)(new Date(a.started_at),"yyyy-MM-dd"))||[]),$=0,_=new Date;for(;Z.has((0,e.format)(_,"yyyy-MM-dd"))||0===$;){if(Z.has((0,e.format)(_,"yyyy-MM-dd")))$++;else if($>0)break;if(_=(0,f.subDays)(_,1),0===$&&!Z.has((0,e.format)(new Date,"yyyy-MM-dd")))break}let aa=(function(a,b){let{start:c,end:d}=function(a,b){let[c,d]=(0,i.normalizeDates)(a,b.start,b.end);return{start:c,end:d}}(void 0,a),e=+c>+d,f=e?+c:+d,g=e?d:c;g.setHours(0,0,0,0);let h=(void 0)??1;if(!h)return[];h<0&&(h=-h,e=!e);let k=[];for(;+g<=f;)k.push((0,j.constructFrom)(c,g)),g.setDate(g.getDate()+h),g.setHours(0,0,0,0);return e?k.reverse():k})({start:M,end:N}).map(a=>{let b=Q.filter(b=>(0,k.isSameDay)(new Date(b.started_at),a));return{date:a,distance:b.reduce((a,b)=>a+(Number(b.distance_meters)||0),0)/1e3,hasActivity:b.length>0}});return(K?.length||0)>0||(L?.length||0)>0||I?(0,b.jsxs)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6 px-4 lg:px-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:F("title")}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:F("subtitle")})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[(0,b.jsx)(t.MapPin,{className:"h-4 w-4"}),F("thisWeek")]}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[S.toFixed(1)," km"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[U>=0?(0,b.jsx)(r,{className:"h-3.5 w-3.5 text-emerald-500"}):(0,b.jsx)(s,{className:"h-3.5 w-3.5 text-red-500"}),(0,b.jsxs)("span",{className:(0,B.cn)("text-xs",U>=0?"text-emerald-600":"text-red-600"),children:[U>=0?"+":"",U,"% ",F("vsLastWeek")]})]})]}),(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[(0,b.jsx)(u.Clock,{className:"h-4 w-4"}),F("trainingTime")]}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:D(V,G)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[X>=0?(0,b.jsx)(r,{className:"h-3.5 w-3.5 text-emerald-500"}):(0,b.jsx)(s,{className:"h-3.5 w-3.5 text-red-500"}),(0,b.jsxs)("span",{className:(0,B.cn)("text-xs",X>=0?"text-emerald-600":"text-red-600"),children:[X>=0?"+":"",X,"% ",F("vsLastWeek")]})]})]}),(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[(0,b.jsx)(x.Calendar,{className:"h-4 w-4"}),F("trainings")]}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Y}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:F("completedThisWeek")})]}),(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[(0,b.jsx)(v,{className:"h-4 w-4 text-orange-500"}),F("streak")]}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[$," ",1!==$?"nl"===G?"dagen":"days":"nl"===G?"dag":"day"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:F("consecutiveActive")})]})]}),(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-6",children:[(0,b.jsx)("h2",{className:"font-semibold mb-4",children:F("thisWeek")}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2",children:aa.map((a,c)=>(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:(0,e.format)(a.date,"EEE",{locale:H})}),(0,b.jsx)("div",{className:(0,B.cn)("aspect-square rounded-lg flex items-center justify-center text-sm font-medium transition-colors",a.hasActivity?"bg-emerald-500/20 text-emerald-700 dark:text-emerald-400":"bg-muted text-muted-foreground"),children:a.distance>0?`${a.distance.toFixed(1)}`:"-"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,e.format)(a.date,"d",{locale:H})})]},c))})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsx)(C.PersonalRecords,{userId:p.id}),(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-6",children:[(0,b.jsxs)("h2",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(w.Target,{className:"h-5 w-5 text-primary"}),F("estimatedRaceTimes")]}),I?(0,b.jsxs)("div",{className:"space-y-3",children:[I.estimated_5k_time_seconds&&(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"5K"}),(0,b.jsx)("span",{className:"font-semibold",children:E(I.estimated_5k_time_seconds)})]}),I.estimated_10k_time_seconds&&(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"10K"}),(0,b.jsx)("span",{className:"font-semibold",children:E(I.estimated_10k_time_seconds)})]}),I.estimated_half_marathon_seconds&&(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:F("halfMarathon")}),(0,b.jsx)("span",{className:"font-semibold",children:E(I.estimated_half_marathon_seconds)})]}),I.estimated_marathon_seconds&&(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Marathon"}),(0,b.jsx)("span",{className:"font-semibold",children:E(I.estimated_marathon_seconds)})]}),I.estimated_vo2max&&(0,b.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(y.Heart,{className:"h-4 w-4 text-red-500"}),"VO2max"]}),(0,b.jsx)("span",{className:"font-semibold",children:Number(I.estimated_vo2max).toFixed(1)})]})})]}):(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:F("trainMoreForPredictions")})]})]}),I&&(I.fitness_score||I.fatigue_score)&&(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-6",children:[(0,b.jsx)("h2",{className:"font-semibold mb-4",children:F("trainingLoad")}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[I.fitness_score&&(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-emerald-600",children:I.fitness_score}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F("fitness")})]}),I.fatigue_score&&(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:I.fatigue_score}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F("fatigue")})]}),I.fitness_score&&I.fatigue_score&&(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:(0,B.cn)("text-3xl font-bold",I.fitness_score-I.fatigue_score>0?"text-emerald-600":"text-red-600"),children:I.fitness_score-I.fatigue_score}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F("form")})]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 rounded-xl border border-primary/20 p-6",children:[(0,b.jsx)("h2",{className:"font-semibold mb-4",children:F("last30Days")}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[((K?.reduce((a,b)=>a+(Number(b.distance_meters)||0),0)||0)/1e3).toFixed(1)," km"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F("totalDistance")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:K?.length||0}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F("activities")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:D((K?.reduce((a,b)=>a+(b.duration_seconds||0),0)||0)/60,G)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F("trainingTime")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:K&&K.length>0?function(a){if(!a)return"-";let b=Math.floor(a/60),c=Math.round(a%60);return`${b}:${c.toString().padStart(2,"0")}`}(K.reduce((a,b)=>a+(b.avg_pace_sec_per_km||0),0)/K.length):"-"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F("avgPace")})]})]})]})]}):(0,b.jsxs)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6 px-4 lg:px-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:F("title")}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:F("subtitle")})]})}),(0,b.jsx)("div",{className:"flex flex-1 items-center justify-center py-16",children:(0,b.jsxs)("div",{className:"text-center px-4",children:[(0,b.jsx)("div",{className:"rounded-full bg-primary/10 w-20 h-20 flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(q,{className:"h-10 w-10 text-primary"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:F("empty.title")}),(0,b.jsx)("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto",children:F("empty.description")}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,b.jsx)(z.Button,{asChild:!0,children:(0,b.jsx)(d.default,{href:"/dashboard/plan/new",children:F("empty.createPlan")})}),(0,b.jsx)(z.Button,{variant:"outline",asChild:!0,children:(0,b.jsx)(d.default,{href:"/dashboard/activities/new",children:F("empty.addActivity")})})]})]})})]})}a.s(["default",()=>F],22247)}];

//# sourceMappingURL=apps_web_src_56c8d09d._.js.map