{"version":3,"sources":["../../../../../../apps/web/src/app/dashboard/settings/integrations/strava-actions.tsx","../../../../../../node_modules/.pnpm/lucide-react%400.561.0_react%4019.2.1/node_modules/lucide-react/src/icons/refresh-cw.ts"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Link2, RefreshCw, Loader2 } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\nimport { Button } from \"@/components/ui/button\";\nimport { toast } from \"sonner\";\nimport { useRouter } from \"next/navigation\";\n\ninterface StravaActionsProps {\n  isConnected: boolean;\n}\n\nexport function StravaActions({ isConnected }: StravaActionsProps) {\n  const t = useTranslations(\"settings.integrations.strava\");\n  const router = useRouter();\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [isDisconnecting, setIsDisconnecting] = useState(false);\n\n  const handleSync = async () => {\n    setIsSyncing(true);\n    try {\n      const response = await fetch(\"/api/strava/sync\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ days: 30 }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || \"Sync failed\");\n      }\n\n      toast.success(data.message);\n      router.refresh();\n    } catch (error) {\n      console.error(\"Strava sync error:\", error);\n      toast.error(t(\"syncError\"));\n    } finally {\n      setIsSyncing(false);\n    }\n  };\n\n  const handleDisconnect = async () => {\n    setIsDisconnecting(true);\n    try {\n      const response = await fetch(\"/api/strava/disconnect\", {\n        method: \"POST\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Disconnect failed\");\n      }\n\n      toast.success(t(\"disconnected\"));\n      router.refresh();\n    } catch (error) {\n      console.error(\"Strava disconnect error:\", error);\n      toast.error(t(\"disconnectError\"));\n    } finally {\n      setIsDisconnecting(false);\n    }\n  };\n\n  if (isConnected) {\n    return (\n      <div className=\"mt-4 flex flex-wrap gap-2\">\n        <Button \n          size=\"sm\" \n          onClick={handleSync}\n          disabled={isSyncing}\n        >\n          {isSyncing ? (\n            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n          ) : (\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n          )}\n          {isSyncing ? t(\"syncing\") : t(\"syncNow\")}\n        </Button>\n        <Button \n          variant=\"outline\" \n          size=\"sm\"\n          onClick={handleDisconnect}\n          disabled={isDisconnecting}\n        >\n          {isDisconnecting ? (\n            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n          ) : null}\n          {t(\"disconnect\")}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-4\">\n      <Button size=\"sm\" asChild>\n        <a href=\"/api/auth/strava?mode=connect\">\n          <Link2 className=\"h-4 w-4 mr-2\" />\n          {t(\"connectWith\")}\n        </a>\n      </Button>\n    </div>\n  );\n}\n\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8', key: 'v9h5vc' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n  ['path', { d: 'M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16', key: '3uifl3' }],\n  ['path', { d: 'M8 16H3v5', key: '1cv678' }],\n];\n\n/**\n * @component @name RefreshCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDEgOS05IDkuNzUgOS43NSAwIDAgMSA2Ljc0IDIuNzRMMjEgOCIgLz4KICA8cGF0aCBkPSJNMjEgM3Y1aC01IiAvPgogIDxwYXRoIGQ9Ik0yMSAxMmE5IDkgMCAwIDEtOSA5IDkuNzUgOS43NSAwIDAgMS02Ljc0LTIuNzRMMyAxNiIgLz4KICA8cGF0aCBkPSJNOCAxNkgzdjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/refresh-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCw = createLucideIcon('refresh-cw', __iconNode);\n\nexport default RefreshCw;\n"],"names":[],"mappings":"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","ignoreList":[1]}