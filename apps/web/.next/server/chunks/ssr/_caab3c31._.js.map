{"version":3,"sources":["../../../../../../node_modules/.pnpm/next%4016.0.10_babel-plugin-react-compiler%401.0.0_react-dom%4019.2.1_react%4019.2.1__react%4019.2.1/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_babel-plugin-react-compiler%401.0.0_react-dom%4019.2.1_react%4019.2.1__react%4019.2.1/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../../../apps/web/src/lib/training/pace-calculator.ts","../../../../../../apps/web/src/lib/training/plan-generator.ts","../../../../../../apps/web/.next-internal/server/app/dashboard/plan/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","/**\n * Pace Calculator & Training Zone Calculator\n * Based on analysis of Year Round Running and standard running science\n */\n\nexport interface PaceZones {\n  /** Race goal pace in seconds per km */\n  goalPace: number;\n  /** Easy run pace range (slow, comfortable) */\n  easyPace: { min: number; max: number };\n  /** Long run pace range */\n  longRunPace: { min: number; max: number };\n  /** Tempo/threshold pace range */\n  tempoPace: { min: number; max: number };\n  /** Interval pace range */\n  intervalPace: { min: number; max: number };\n  /** Recovery pace range (very easy) */\n  recoveryPace: { min: number; max: number };\n  /** Heart rate zones */\n  hrZones: {\n    zone1: string; // Recovery\n    zone2: string; // Easy/Aerobic\n    zone3: string; // Tempo\n    zone4: string; // Threshold\n    zone5: string; // VO2max/Interval\n  };\n}\n\nexport interface RaceTimeInput {\n  distanceKm: number;\n  timeSeconds: number;\n}\n\n/**\n * Predicts race time for a target distance using Riegel's formula\n * T2 = T1 × (D2/D1)^1.06\n */\nexport function predictRaceTime(\n  knownRace: RaceTimeInput,\n  targetDistanceKm: number\n): number {\n  const exponent = 1.06;\n  const ratio = targetDistanceKm / knownRace.distanceKm;\n  return knownRace.timeSeconds * Math.pow(ratio, exponent);\n}\n\n/**\n * Calculate pace zones based on goal time and race distance\n */\nexport function calculatePaceZones(\n  goalDistanceKm: number,\n  goalTimeSeconds: number\n): PaceZones {\n  const goalPace = goalTimeSeconds / goalDistanceKm; // seconds per km\n\n  // Pace zone multipliers based on Year Round Running analysis\n  // Easy: +15% to +30% slower than goal\n  // Long: +5% to +20% slower than goal\n  // Tempo: goal ± 5%\n  // Interval: 10-15% faster than goal\n  // Recovery: +20% to +35% slower than goal\n\n  return {\n    goalPace,\n    easyPace: {\n      min: Math.round(goalPace * 1.15),\n      max: Math.round(goalPace * 1.30),\n    },\n    longRunPace: {\n      min: Math.round(goalPace * 1.05),\n      max: Math.round(goalPace * 1.20),\n    },\n    tempoPace: {\n      min: Math.round(goalPace * 0.95),\n      max: Math.round(goalPace * 1.05),\n    },\n    intervalPace: {\n      min: Math.round(goalPace * 0.85),\n      max: Math.round(goalPace * 0.95),\n    },\n    recoveryPace: {\n      min: Math.round(goalPace * 1.20),\n      max: Math.round(goalPace * 1.35),\n    },\n    hrZones: {\n      zone1: \"50-60% max HR\",\n      zone2: \"60-70% max HR\",\n      zone3: \"70-80% max HR\",\n      zone4: \"80-90% max HR\",\n      zone5: \"90-100% max HR\",\n    },\n  };\n}\n\n/**\n * Calculate estimated heart rate zones based on age\n * Uses Karvonen formula: Target HR = ((Max HR − Resting HR) × %Intensity) + Resting HR\n * Simplified version without resting HR\n */\nexport function calculateHRZones(\n  age: number,\n  restingHR?: number\n): {\n  maxHR: number;\n  zones: { zone: number; min: number; max: number; description: string }[];\n} {\n  // Max HR = 220 - age (classic formula)\n  // Alternative: 207 - (0.7 × age) (more accurate for trained athletes)\n  const maxHR = Math.round(207 - 0.7 * age);\n  const rhr = restingHR || 60;\n\n  const calculateZone = (minPercent: number, maxPercent: number): { min: number; max: number } => {\n    // Karvonen formula\n    const hrReserve = maxHR - rhr;\n    return {\n      min: Math.round(rhr + hrReserve * minPercent),\n      max: Math.round(rhr + hrReserve * maxPercent),\n    };\n  };\n\n  return {\n    maxHR,\n    zones: [\n      { zone: 1, ...calculateZone(0.5, 0.6), description: \"Herstel - Zeer licht\" },\n      { zone: 2, ...calculateZone(0.6, 0.7), description: \"Aeroob - Makkelijk praten\" },\n      { zone: 3, ...calculateZone(0.7, 0.8), description: \"Tempo - Zwaar ademhalen\" },\n      { zone: 4, ...calculateZone(0.8, 0.9), description: \"Drempel - Kort praten\" },\n      { zone: 5, ...calculateZone(0.9, 1.0), description: \"VO2max - Maximaal\" },\n    ],\n  };\n}\n\n/**\n * Format pace from seconds per km to MM:SS string\n */\nexport function formatPace(secondsPerKm: number): string {\n  const minutes = Math.floor(secondsPerKm / 60);\n  const seconds = Math.round(secondsPerKm % 60);\n  return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n}\n\n/**\n * Format pace range\n */\nexport function formatPaceRange(range: { min: number; max: number }): string {\n  return `${formatPace(range.min)}-${formatPace(range.max)}`;\n}\n\n/**\n * Parse pace string (MM:SS) to seconds per km\n */\nexport function parsePace(paceString: string): number {\n  const [minutes, seconds] = paceString.split(\":\").map(Number);\n  return minutes * 60 + (seconds || 0);\n}\n\n/**\n * Convert time to seconds\n */\nexport function timeToSeconds(hours: number, minutes: number, seconds: number = 0): number {\n  return hours * 3600 + minutes * 60 + seconds;\n}\n\n/**\n * Format seconds to HH:MM:SS or MM:SS\n */\nexport function formatTime(totalSeconds: number): string {\n  const hours = Math.floor(totalSeconds / 3600);\n  const minutes = Math.floor((totalSeconds % 3600) / 60);\n  const seconds = Math.round(totalSeconds % 60);\n\n  if (hours > 0) {\n    return `${hours}:${minutes.toString().padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}`;\n  }\n  return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n}\n\n/**\n * Standard race distances in km\n */\nexport const RACE_DISTANCES = {\n  \"5k\": 5,\n  \"10k\": 10,\n  \"15k\": 15,\n  half_marathon: 21.0975,\n  marathon: 42.195,\n} as const;\n\n/**\n * Estimate VO2max from race performance\n * Based on Jack Daniels' VDOT formula (simplified)\n */\nexport function estimateVO2max(distanceKm: number, timeSeconds: number): number {\n  const velocity = (distanceKm * 1000) / timeSeconds; // m/s\n  const velocityMpm = velocity * 60; // m/min\n\n  // Simplified VO2max estimation\n  // Based on: VO2 = -4.60 + 0.182258 × velocity + 0.000104 × velocity²\n  const vo2 = -4.6 + 0.182258 * velocityMpm + 0.000104 * velocityMpm * velocityMpm;\n\n  // Adjust for race duration (longer = lower percentage of VO2max used)\n  const timeMinutes = timeSeconds / 60;\n  let percentVO2max: number;\n  \n  if (timeMinutes <= 10) {\n    percentVO2max = 0.98;\n  } else if (timeMinutes <= 30) {\n    percentVO2max = 0.92;\n  } else if (timeMinutes <= 60) {\n    percentVO2max = 0.88;\n  } else if (timeMinutes <= 120) {\n    percentVO2max = 0.85;\n  } else {\n    percentVO2max = 0.80;\n  }\n\n  return Math.round((vo2 / percentVO2max) * 10) / 10;\n}\n\n","\"use server\";\n\nimport { createClient } from \"@/lib/supabase/server\";\nimport type { GoalType, ExperienceLevel, WorkoutType } from \"@/types/database\";\nimport {\n  calculatePaceZones,\n  formatPace,\n  formatPaceRange,\n  RACE_DISTANCES,\n  type PaceZones,\n} from \"./pace-calculator\";\n\n// ============================================================================\n// Types & Interfaces\n// ============================================================================\n\nexport interface PlanGeneratorInput {\n  /** Race distance goal */\n  goalType: GoalType;\n  /** Target event date */\n  eventDate: Date | null;\n  /** Target finish time in minutes (e.g., 105 for 1:45:00) */\n  targetTimeMinutes: number | null;\n  /** User's running experience */\n  experienceLevel: ExperienceLevel;\n  /** Current weekly running distance */\n  recentWeeklyKm: number;\n  /** Longest recent run in km */\n  longestRecentRun: number;\n  /** Current easy pace in seconds per km */\n  currentPace: number | null;\n  /** Training days per week (3-7) */\n  daysPerWeek: number;\n  /** Total training hours per week */\n  hoursPerWeek: number;\n  /** Preferred training days */\n  preferredDays: string[];\n  /** Total weeks for the plan */\n  weeksDuration: number;\n  /** Long run preferred day */\n  longRunDay?: string;\n  /** Include strength training? */\n  includeStrength?: boolean;\n  /** Strength training days */\n  strengthDays?: string[];\n  /** Starting weekly distance in km (week 1) */\n  startingWeeklyKm?: number;\n}\n\nexport interface GeneratedWorkout {\n  scheduled_date: string;\n  week_number: number;\n  day_of_week: number;\n  workout_type: WorkoutType;\n  title: string;\n  description: string;\n  target_duration_minutes: number;\n  target_distance_km: number;\n  target_pace_min_per_km: number | null;\n  target_pace_range: string | null;\n  target_heart_rate_zone: number | null;\n  workout_structure: WorkoutStructure;\n  coach_notes: string | null;\n}\n\ninterface WorkoutStructure {\n  segments: WorkoutSegment[];\n  estimated_duration_minutes: number;\n  estimated_distance_km: number;\n}\n\ninterface WorkoutSegment {\n  name: string;\n  type: \"warmup\" | \"main\" | \"cooldown\" | \"recovery\" | \"repeat\";\n  duration_type: \"time\" | \"distance\";\n  duration_value: number;\n  duration_unit: \"minutes\" | \"km\" | \"meters\";\n  intensity: \"easy\" | \"moderate\" | \"tempo\" | \"threshold\" | \"hard\" | \"max\";\n  target_pace?: string;\n  target_hr_zone?: number;\n  repeat_count?: number;\n  segments?: WorkoutSegment[];\n  notes?: string;\n}\n\nexport interface WeeklySummary {\n  week: number;\n  weekType: \"regular\" | \"recovery\" | \"peak\" | \"taper\" | \"race\";\n  phase: string;\n  totalKm: number;\n  workouts: {\n    type: string;\n    distance: number;\n    day: string;\n  }[];\n  focus: string;\n}\n\nexport interface GeneratePlanResult {\n  success: boolean;\n  plan?: {\n    paceZones: PaceZones;\n    phases: {\n      name: string;\n      weeks: number[];\n      focus: string;\n      volumeMultiplier: number;\n    }[];\n    weeklySummary: WeeklySummary[];\n  };\n  workouts?: GeneratedWorkout[];\n  error?: string;\n}\n\n// ============================================================================\n// Constants\n// ============================================================================\n\nconst DAY_NAME_TO_NUMBER: Record<string, number> = {\n  sunday: 0,\n  monday: 1,\n  tuesday: 2,\n  wednesday: 3,\n  thursday: 4,\n  friday: 5,\n  saturday: 6,\n};\n\nconst DAY_NUMBER_TO_NAME: Record<number, string> = {\n  0: \"Zondag\",\n  1: \"Maandag\",\n  2: \"Dinsdag\",\n  3: \"Woensdag\",\n  4: \"Donderdag\",\n  5: \"Vrijdag\",\n  6: \"Zaterdag\",\n};\n\n/** Base weekly km targets by goal type and experience level */\nconst BASE_WEEKLY_KM: Record<GoalType, Record<ExperienceLevel, number>> = {\n  \"5k\": { beginner: 20, intermediate: 30, advanced: 45, elite: 60 },\n  \"10k\": { beginner: 25, intermediate: 40, advanced: 55, elite: 75 },\n  \"15k\": { beginner: 30, intermediate: 45, advanced: 60, elite: 80 },\n  half_marathon: { beginner: 35, intermediate: 50, advanced: 70, elite: 90 },\n  marathon: { beginner: 45, intermediate: 65, advanced: 90, elite: 120 },\n  fitness: { beginner: 15, intermediate: 25, advanced: 40, elite: 50 },\n  custom: { beginner: 20, intermediate: 35, advanced: 50, elite: 70 },\n};\n\n/** Recovery week frequency (every N weeks) */\nconst RECOVERY_WEEK_FREQUENCY = 4;\n\n/** Recovery week volume reduction */\nconst RECOVERY_VOLUME_MULTIPLIER = 0.80;\n\n/** Maximum weekly volume increase (progressive overload limit) */\nconst MAX_WEEKLY_INCREASE = 0.15; // 15%\n\n// ============================================================================\n// Main Generator Function\n// ============================================================================\n\nexport async function generateTrainingPlan(\n  input: PlanGeneratorInput\n): Promise<GeneratePlanResult> {\n  try {\n    // 1. Calculate pace zones from goal time\n    const paceZones = calculateGoalPaceZones(input);\n\n    // 2. Build phase structure\n    const phases = buildPhaseStructure(input.weeksDuration, input.goalType);\n\n    // 3. Calculate weekly volumes\n    const weeklyVolumes = calculateWeeklyVolumes(input, phases);\n\n    // 4. Generate all workouts\n    const workouts: GeneratedWorkout[] = [];\n    const weeklySummary: WeeklySummary[] = [];\n    const startDate = new Date();\n\n    for (let week = 1; week <= input.weeksDuration; week++) {\n      const phase = getPhaseForWeek(phases, week);\n      const weekType = getWeekType(week, input.weeksDuration, phases);\n      const weekVolume = weeklyVolumes[week - 1];\n\n      // Generate workouts for this week\n      const weekWorkouts = generateWeekWorkouts(\n        week,\n        weekType,\n        weekVolume,\n        phase,\n        paceZones,\n        input,\n        startDate\n      );\n\n      workouts.push(...weekWorkouts);\n\n      // Build weekly summary\n      const summary: WeeklySummary = {\n        week,\n        weekType,\n        phase: phase?.name || \"Training\",\n        totalKm: Math.round(weekVolume * 10) / 10,\n        workouts: weekWorkouts.map((w) => ({\n          type: w.workout_type,\n          distance: w.target_distance_km,\n          day: DAY_NUMBER_TO_NAME[w.day_of_week],\n        })),\n        focus: phase?.focus || \"Algemene training\",\n      };\n      weeklySummary.push(summary);\n    }\n\n    return {\n      success: true,\n      plan: {\n        paceZones,\n        phases,\n        weeklySummary,\n      },\n      workouts,\n    };\n  } catch (error) {\n    console.error(\"Plan generation error:\", error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : \"Onbekende fout bij genereren\",\n    };\n  }\n}\n\n// ============================================================================\n// Pace Zone Calculation\n// ============================================================================\n\nfunction calculateGoalPaceZones(input: PlanGeneratorInput): PaceZones {\n  // If target time is provided, calculate from that\n  if (input.targetTimeMinutes && input.goalType !== \"fitness\" && input.goalType !== \"custom\") {\n    const distanceKm = RACE_DISTANCES[input.goalType as keyof typeof RACE_DISTANCES];\n    if (distanceKm) {\n      const goalTimeSeconds = input.targetTimeMinutes * 60;\n      return calculatePaceZones(distanceKm, goalTimeSeconds);\n    }\n  }\n\n  // Fallback: estimate from current pace or experience level\n  let estimatedPace: number;\n  if (input.currentPace) {\n    estimatedPace = input.currentPace;\n  } else {\n    // Default paces by experience level (seconds per km)\n    const defaultPaces: Record<ExperienceLevel, number> = {\n      beginner: 420, // 7:00 min/km\n      intermediate: 360, // 6:00 min/km\n      advanced: 300, // 5:00 min/km\n      elite: 240, // 4:00 min/km\n    };\n    estimatedPace = defaultPaces[input.experienceLevel];\n  }\n\n  // Calculate zones from estimated pace\n  const distanceKm = input.goalType === \"fitness\" ? 5 : \n    (RACE_DISTANCES[input.goalType as keyof typeof RACE_DISTANCES] || 10);\n  const goalTimeSeconds = estimatedPace * distanceKm;\n\n  return calculatePaceZones(distanceKm, goalTimeSeconds);\n}\n\n// ============================================================================\n// Phase Structure\n// ============================================================================\n\ninterface Phase {\n  name: string;\n  weeks: number[];\n  focus: string;\n  volumeMultiplier: number;\n}\n\nfunction buildPhaseStructure(totalWeeks: number, goalType: GoalType): Phase[] {\n  // For fitness goals, use a simpler structure\n  if (goalType === \"fitness\") {\n    return [\n      {\n        name: \"Training\",\n        weeks: Array.from({ length: totalWeeks }, (_, i) => i + 1),\n        focus: \"Consistente opbouw\",\n        volumeMultiplier: 1.0,\n      },\n    ];\n  }\n\n  // Race-focused plans have distinct phases\n  const phases: Phase[] = [];\n\n  // Calculate phase lengths based on total duration\n  let baseWeeks: number;\n  let buildWeeks: number;\n  let peakWeeks: number;\n  let taperWeeks: number;\n\n  if (totalWeeks <= 8) {\n    baseWeeks = 2;\n    buildWeeks = 3;\n    peakWeeks = 2;\n    taperWeeks = 1;\n  } else if (totalWeeks <= 12) {\n    baseWeeks = 3;\n    buildWeeks = 4;\n    peakWeeks = 3;\n    taperWeeks = 2;\n  } else if (totalWeeks <= 16) {\n    baseWeeks = 4;\n    buildWeeks = 5;\n    peakWeeks = 4;\n    taperWeeks = 3;\n  } else {\n    baseWeeks = Math.ceil(totalWeeks * 0.25);\n    buildWeeks = Math.ceil(totalWeeks * 0.30);\n    peakWeeks = Math.ceil(totalWeeks * 0.25);\n    taperWeeks = Math.max(2, totalWeeks - baseWeeks - buildWeeks - peakWeeks);\n  }\n\n  let currentWeek = 1;\n\n  // Base phase - build foundation\n  phases.push({\n    name: \"Basis\",\n    weeks: Array.from({ length: baseWeeks }, (_, i) => currentWeek + i),\n    focus: \"Aerobe basis opbouwen\",\n    volumeMultiplier: 0.80,\n  });\n  currentWeek += baseWeeks;\n\n  // Build phase - introduce speed work\n  phases.push({\n    name: \"Opbouw\",\n    weeks: Array.from({ length: buildWeeks }, (_, i) => currentWeek + i),\n    focus: \"Snelheid en uithoudingsvermogen\",\n    volumeMultiplier: 1.0,\n  });\n  currentWeek += buildWeeks;\n\n  // Peak phase - race specific training\n  phases.push({\n    name: \"Piek\",\n    weeks: Array.from({ length: peakWeeks }, (_, i) => currentWeek + i),\n    focus: \"Race-specifieke training\",\n    volumeMultiplier: 1.10,\n  });\n  currentWeek += peakWeeks;\n\n  // Taper phase - reduce volume, maintain intensity\n  phases.push({\n    name: \"Taper\",\n    weeks: Array.from({ length: taperWeeks }, (_, i) => currentWeek + i),\n    focus: \"Herstel voor race\",\n    volumeMultiplier: 0.60,\n  });\n\n  return phases;\n}\n\nfunction getPhaseForWeek(phases: Phase[], week: number): Phase | undefined {\n  return phases.find((p) => p.weeks.includes(week));\n}\n\nfunction getWeekType(\n  week: number,\n  totalWeeks: number,\n  phases: Phase[]\n): \"regular\" | \"recovery\" | \"peak\" | \"taper\" | \"race\" {\n  // Last week is race week\n  if (week === totalWeeks) {\n    return \"race\";\n  }\n\n  // Check if in taper phase\n  const phase = getPhaseForWeek(phases, week);\n  if (phase?.name === \"Taper\") {\n    return \"taper\";\n  }\n\n  // Check if in peak phase\n  if (phase?.name === \"Piek\") {\n    return \"peak\";\n  }\n\n  // Recovery week every RECOVERY_WEEK_FREQUENCY weeks (but not in first 2 weeks)\n  if (week > 2 && week % RECOVERY_WEEK_FREQUENCY === 0) {\n    return \"recovery\";\n  }\n\n  return \"regular\";\n}\n\n// ============================================================================\n// Volume Calculation\n// ============================================================================\n\nfunction calculateWeeklyVolumes(input: PlanGeneratorInput, phases: Phase[]): number[] {\n  const volumes: number[] = [];\n\n  // Starting volume (either user-specified or calculated)\n  const startingVolume = input.startingWeeklyKm || Math.max(input.recentWeeklyKm, 15);\n\n  // Target peak volume based on goal and experience\n  const targetPeakVolume = BASE_WEEKLY_KM[input.goalType]?.[input.experienceLevel] ||\n    BASE_WEEKLY_KM.fitness[input.experienceLevel];\n\n  // Calculate progressive increase\n  const peakWeek = Math.floor(input.weeksDuration * 0.75); // Peak at ~75% of plan\n  const weeklyIncrease = (targetPeakVolume - startingVolume) / peakWeek;\n\n  for (let week = 1; week <= input.weeksDuration; week++) {\n    const phase = getPhaseForWeek(phases, week);\n    const weekType = getWeekType(week, input.weeksDuration, phases);\n\n    // Base volume calculation with progressive overload\n    let baseVolume: number;\n    if (week <= peakWeek) {\n      baseVolume = startingVolume + weeklyIncrease * (week - 1);\n    } else {\n      // After peak, maintain or reduce\n      baseVolume = targetPeakVolume;\n    }\n\n    // Apply phase multiplier\n    const phaseMultiplier = phase?.volumeMultiplier || 1.0;\n    let weekVolume = baseVolume * phaseMultiplier;\n\n    // Apply week type adjustments\n    switch (weekType) {\n      case \"recovery\":\n        weekVolume *= RECOVERY_VOLUME_MULTIPLIER;\n        break;\n      case \"taper\":\n        // Progressive taper reduction\n        const taperPhase = phases.find((p) => p.name === \"Taper\");\n        if (taperPhase) {\n          const weekInTaper = week - taperPhase.weeks[0] + 1;\n          const taperMultiplier = 1 - (weekInTaper * 0.2); // Reduce 20% per week\n          weekVolume *= Math.max(0.3, taperMultiplier);\n        }\n        break;\n      case \"race\":\n        weekVolume *= 0.25; // Race week is very light\n        break;\n    }\n\n    // Ensure we don't exceed max weekly increase from previous week\n    if (volumes.length > 0) {\n      const previousVolume = volumes[volumes.length - 1];\n      const maxIncrease = previousVolume * (1 + MAX_WEEKLY_INCREASE);\n      weekVolume = Math.min(weekVolume, maxIncrease);\n    }\n\n    volumes.push(Math.round(weekVolume * 10) / 10);\n  }\n\n  return volumes;\n}\n\n// ============================================================================\n// Workout Generation\n// ============================================================================\n\nfunction generateWeekWorkouts(\n  week: number,\n  weekType: \"regular\" | \"recovery\" | \"peak\" | \"taper\" | \"race\",\n  weekVolume: number,\n  phase: Phase | undefined,\n  paceZones: PaceZones,\n  input: PlanGeneratorInput,\n  startDate: Date\n): GeneratedWorkout[] {\n  const workouts: GeneratedWorkout[] = [];\n\n  // Sort preferred days\n  const sortedDays = [...input.preferredDays].sort(\n    (a, b) => DAY_NAME_TO_NUMBER[a] - DAY_NAME_TO_NUMBER[b]\n  );\n\n  // Determine long run day\n  const longRunDay = input.longRunDay || sortedDays[sortedDays.length - 1];\n  const otherDays = sortedDays.filter((d) => d !== longRunDay);\n\n  // Calculate workout distribution based on week type and phase\n  const distribution = getWorkoutDistribution(weekType, phase?.name, input.daysPerWeek);\n\n  // Assign days to workout types\n  let dayIndex = 0;\n\n  // Long run (always on designated day)\n  if (distribution.longRun > 0) {\n    const longRunVolume = weekVolume * distribution.longRun;\n    workouts.push(\n      createLongRunWorkout(week, longRunDay, longRunVolume, paceZones, input, startDate, weekType)\n    );\n  }\n\n  // Speed work (intervals or tempo)\n  const speedDay = otherDays[dayIndex % otherDays.length];\n  if (distribution.speedWork > 0 && speedDay) {\n    const speedVolume = weekVolume * distribution.speedWork;\n    const useInterval = week % 2 === 1; // Alternate between intervals and tempo\n    workouts.push(\n      createSpeedWorkout(\n        week,\n        speedDay,\n        speedVolume,\n        paceZones,\n        input,\n        startDate,\n        weekType,\n        useInterval\n      )\n    );\n    dayIndex++;\n  }\n\n  // Easy runs (fill remaining days)\n  const remainingVolume = weekVolume - workouts.reduce((sum, w) => sum + w.target_distance_km, 0);\n  const easyDays = otherDays.filter(\n    (d) => !workouts.some((w) => DAY_NUMBER_TO_NAME[w.day_of_week].toLowerCase() === d)\n  );\n  const easyRunCount = Math.min(easyDays.length, distribution.easyRuns);\n  const volumePerEasyRun = remainingVolume / Math.max(1, easyRunCount);\n\n  for (let i = 0; i < easyRunCount && i < easyDays.length; i++) {\n    workouts.push(\n      createEasyRunWorkout(\n        week,\n        easyDays[i],\n        volumePerEasyRun,\n        paceZones,\n        input,\n        startDate,\n        weekType\n      )\n    );\n  }\n\n  // Sort workouts by day\n  workouts.sort((a, b) => {\n    const dayA = (a.day_of_week + 7) % 7;\n    const dayB = (b.day_of_week + 7) % 7;\n    return dayA - dayB;\n  });\n\n  return workouts;\n}\n\ninterface WorkoutDistribution {\n  longRun: number; // % of weekly volume\n  speedWork: number; // % of weekly volume\n  easyRuns: number; // count\n}\n\nfunction getWorkoutDistribution(\n  weekType: string,\n  phaseName: string | undefined,\n  daysPerWeek: number\n): WorkoutDistribution {\n  // Base distribution: Long ~50%, Speed ~25-30%, Easy ~20-25%\n  \n  if (weekType === \"race\") {\n    return { longRun: 0, speedWork: 0.3, easyRuns: Math.max(1, daysPerWeek - 1) };\n  }\n\n  if (weekType === \"taper\") {\n    return { longRun: 0.4, speedWork: 0.25, easyRuns: Math.max(1, daysPerWeek - 2) };\n  }\n\n  if (weekType === \"recovery\") {\n    return { longRun: 0.45, speedWork: 0.15, easyRuns: Math.max(1, daysPerWeek - 2) };\n  }\n\n  // Regular weeks by phase\n  switch (phaseName) {\n    case \"Basis\":\n      return { longRun: 0.50, speedWork: 0.15, easyRuns: Math.max(1, daysPerWeek - 2) };\n    case \"Opbouw\":\n      return { longRun: 0.45, speedWork: 0.25, easyRuns: Math.max(1, daysPerWeek - 2) };\n    case \"Piek\":\n      return { longRun: 0.50, speedWork: 0.30, easyRuns: Math.max(1, daysPerWeek - 2) };\n    default:\n      return { longRun: 0.45, speedWork: 0.25, easyRuns: Math.max(1, daysPerWeek - 2) };\n  }\n}\n\n// ============================================================================\n// Individual Workout Creators\n// ============================================================================\n\nfunction createLongRunWorkout(\n  week: number,\n  dayName: string,\n  distance: number,\n  paceZones: PaceZones,\n  input: PlanGeneratorInput,\n  startDate: Date,\n  weekType: string\n): GeneratedWorkout {\n  const paceRange = formatPaceRange(paceZones.longRunPace);\n  const duration = Math.round((distance / 1000) * paceZones.longRunPace.max / 60);\n\n  // Special long run variations for peak weeks\n  let description = `Lange duurloop van ${Math.round(distance * 10) / 10} km op ${paceRange} min/km tempo (HR Zone 2-3).`;\n  let notes = \"Houd een comfortabel tempo aan waarbij je nog kunt praten.\";\n\n  if (weekType === \"peak\" && week > 10) {\n    description += ` Inclusief 2x 3km op race tempo.`;\n    notes = \"Start rustig, voeg de race tempo blokken toe in het midden van de loop.\";\n  }\n\n  const structure: WorkoutStructure = {\n    segments: [\n      {\n        name: \"Opwarming\",\n        type: \"warmup\",\n        duration_type: \"time\",\n        duration_value: 10,\n        duration_unit: \"minutes\",\n        intensity: \"easy\",\n        target_hr_zone: 2,\n      },\n      {\n        name: \"Hoofddeel\",\n        type: \"main\",\n        duration_type: \"distance\",\n        duration_value: Math.round((distance - 2) * 1000),\n        duration_unit: \"meters\",\n        intensity: \"moderate\",\n        target_pace: paceRange,\n        target_hr_zone: 2,\n      },\n      {\n        name: \"Cooldown\",\n        type: \"cooldown\",\n        duration_type: \"time\",\n        duration_value: 5,\n        duration_unit: \"minutes\",\n        intensity: \"easy\",\n        target_hr_zone: 1,\n      },\n    ],\n    estimated_duration_minutes: duration,\n    estimated_distance_km: distance,\n  };\n\n  return {\n    scheduled_date: calculateScheduledDate(startDate, week, dayName),\n    week_number: week,\n    day_of_week: DAY_NAME_TO_NUMBER[dayName],\n    workout_type: \"long_run\",\n    title: \"Lange Duurloop\",\n    description,\n    target_duration_minutes: duration,\n    target_distance_km: Math.round(distance * 10) / 10,\n    target_pace_min_per_km: paceZones.longRunPace.max / 60,\n    target_pace_range: paceRange,\n    target_heart_rate_zone: 2,\n    workout_structure: structure,\n    coach_notes: notes,\n  };\n}\n\nfunction createSpeedWorkout(\n  week: number,\n  dayName: string,\n  distance: number,\n  paceZones: PaceZones,\n  input: PlanGeneratorInput,\n  startDate: Date,\n  weekType: string,\n  isInterval: boolean\n): GeneratedWorkout {\n  if (isInterval) {\n    return createIntervalWorkout(week, dayName, distance, paceZones, input, startDate, weekType);\n  } else {\n    return createTempoWorkout(week, dayName, distance, paceZones, input, startDate, weekType);\n  }\n}\n\nfunction createIntervalWorkout(\n  week: number,\n  dayName: string,\n  distance: number,\n  paceZones: PaceZones,\n  input: PlanGeneratorInput,\n  startDate: Date,\n  weekType: string\n): GeneratedWorkout {\n  const intervalPaceRange = formatPaceRange(paceZones.intervalPace);\n  const recoveryPaceRange = formatPaceRange(paceZones.recoveryPace);\n\n  // Calculate interval structure based on distance and experience\n  const warmupCooldown = 3; // km total\n  const mainDistance = Math.max(2, distance - warmupCooldown);\n\n  // Progress interval length through the plan\n  let intervalLength: number; // in meters\n  let repeatCount: number;\n\n  if (input.experienceLevel === \"beginner\") {\n    intervalLength = 400;\n    repeatCount = Math.min(6, Math.floor(mainDistance / 0.8)); // Include recovery\n  } else if (input.experienceLevel === \"intermediate\") {\n    intervalLength = week > 8 ? 800 : 400;\n    repeatCount = Math.min(8, Math.floor(mainDistance / (intervalLength === 800 ? 1.6 : 0.8)));\n  } else {\n    intervalLength = week > 10 ? 1000 : week > 5 ? 800 : 400;\n    repeatCount = Math.min(10, Math.floor(mainDistance / ((intervalLength / 1000) * 2)));\n  }\n\n  const duration = Math.round((distance / 1000) * paceZones.tempoPace.max / 60);\n\n  const structure: WorkoutStructure = {\n    segments: [\n      {\n        name: \"Opwarming\",\n        type: \"warmup\",\n        duration_type: \"distance\",\n        duration_value: 1500,\n        duration_unit: \"meters\",\n        intensity: \"easy\",\n        target_hr_zone: 2,\n      },\n      {\n        name: \"Intervallen\",\n        type: \"repeat\",\n        duration_type: \"distance\",\n        duration_value: intervalLength,\n        duration_unit: \"meters\",\n        intensity: \"hard\",\n        target_pace: intervalPaceRange,\n        target_hr_zone: 4,\n        repeat_count: repeatCount,\n        segments: [\n          {\n            name: \"Hard\",\n            type: \"main\",\n            duration_type: \"distance\",\n            duration_value: intervalLength,\n            duration_unit: \"meters\",\n            intensity: \"hard\",\n            target_pace: intervalPaceRange,\n            target_hr_zone: 4,\n          },\n          {\n            name: \"Herstel\",\n            type: \"recovery\",\n            duration_type: \"time\",\n            duration_value: intervalLength <= 400 ? 2 : 3,\n            duration_unit: \"minutes\",\n            intensity: \"easy\",\n            target_hr_zone: 2,\n            notes: \"Rustig joggen of wandelen\",\n          },\n        ],\n      },\n      {\n        name: \"Cooldown\",\n        type: \"cooldown\",\n        duration_type: \"distance\",\n        duration_value: 1500,\n        duration_unit: \"meters\",\n        intensity: \"easy\",\n        target_hr_zone: 2,\n      },\n    ],\n    estimated_duration_minutes: duration,\n    estimated_distance_km: distance,\n  };\n\n  return {\n    scheduled_date: calculateScheduledDate(startDate, week, dayName),\n    week_number: week,\n    day_of_week: DAY_NAME_TO_NUMBER[dayName],\n    workout_type: \"interval\",\n    title: `Interval Training (${repeatCount}x ${intervalLength}m)`,\n    description: `${repeatCount}x ${intervalLength}m intervallen op ${intervalPaceRange} min/km met ${intervalLength <= 400 ? \"2\" : \"3\"} min herstel.`,\n    target_duration_minutes: duration,\n    target_distance_km: Math.round(distance * 10) / 10,\n    target_pace_min_per_km: paceZones.intervalPace.max / 60,\n    target_pace_range: intervalPaceRange,\n    target_heart_rate_zone: 4,\n    workout_structure: structure,\n    coach_notes: \"Warm goed op! Focus op consistente splits.\",\n  };\n}\n\nfunction createTempoWorkout(\n  week: number,\n  dayName: string,\n  distance: number,\n  paceZones: PaceZones,\n  input: PlanGeneratorInput,\n  startDate: Date,\n  weekType: string\n): GeneratedWorkout {\n  const tempoPaceRange = formatPaceRange(paceZones.tempoPace);\n\n  // Tempo block length increases through the plan\n  const warmupCooldown = 3; // km total\n  const tempoDistance = Math.max(3, Math.round((distance - warmupCooldown) * 10) / 10);\n\n  const duration = Math.round((distance / 1000) * paceZones.tempoPace.max / 60);\n\n  const structure: WorkoutStructure = {\n    segments: [\n      {\n        name: \"Opwarming\",\n        type: \"warmup\",\n        duration_type: \"distance\",\n        duration_value: 1500,\n        duration_unit: \"meters\",\n        intensity: \"easy\",\n        target_hr_zone: 2,\n      },\n      {\n        name: \"Tempo blok\",\n        type: \"main\",\n        duration_type: \"distance\",\n        duration_value: tempoDistance * 1000,\n        duration_unit: \"meters\",\n        intensity: \"tempo\",\n        target_pace: tempoPaceRange,\n        target_hr_zone: 3,\n      },\n      {\n        name: \"Cooldown\",\n        type: \"cooldown\",\n        duration_type: \"distance\",\n        duration_value: 1500,\n        duration_unit: \"meters\",\n        intensity: \"easy\",\n        target_hr_zone: 2,\n      },\n    ],\n    estimated_duration_minutes: duration,\n    estimated_distance_km: distance,\n  };\n\n  return {\n    scheduled_date: calculateScheduledDate(startDate, week, dayName),\n    week_number: week,\n    day_of_week: DAY_NAME_TO_NUMBER[dayName],\n    workout_type: \"tempo_run\",\n    title: `Tempo Run (${tempoDistance} km)`,\n    description: `${tempoDistance} km op tempo pace (${tempoPaceRange} min/km). Comfortabel hard - je kunt nog korte zinnen spreken.`,\n    target_duration_minutes: duration,\n    target_distance_km: Math.round(distance * 10) / 10,\n    target_pace_min_per_km: paceZones.tempoPace.max / 60,\n    target_pace_range: tempoPaceRange,\n    target_heart_rate_zone: 3,\n    workout_structure: structure,\n    coach_notes: \"Tempo runs bouwen lactaatdrempel op. Blijf consistent!\",\n  };\n}\n\nfunction createEasyRunWorkout(\n  week: number,\n  dayName: string,\n  distance: number,\n  paceZones: PaceZones,\n  input: PlanGeneratorInput,\n  startDate: Date,\n  weekType: string\n): GeneratedWorkout {\n  const easyPaceRange = formatPaceRange(paceZones.easyPace);\n  const duration = Math.round((distance / 1000) * paceZones.easyPace.max / 60);\n\n  const structure: WorkoutStructure = {\n    segments: [\n      {\n        name: \"Easy run\",\n        type: \"main\",\n        duration_type: \"distance\",\n        duration_value: distance * 1000,\n        duration_unit: \"meters\",\n        intensity: \"easy\",\n        target_pace: easyPaceRange,\n        target_hr_zone: 2,\n      },\n    ],\n    estimated_duration_minutes: duration,\n    estimated_distance_km: distance,\n  };\n\n  return {\n    scheduled_date: calculateScheduledDate(startDate, week, dayName),\n    week_number: week,\n    day_of_week: DAY_NAME_TO_NUMBER[dayName],\n    workout_type: \"easy_run\",\n    title: \"Easy Run\",\n    description: `Rustige duurloop van ${Math.round(distance * 10) / 10} km op ${easyPaceRange} min/km. Houd het comfortabel!`,\n    target_duration_minutes: duration,\n    target_distance_km: Math.round(distance * 10) / 10,\n    target_pace_min_per_km: paceZones.easyPace.max / 60,\n    target_pace_range: easyPaceRange,\n    target_heart_rate_zone: 2,\n    workout_structure: structure,\n    coach_notes: \"Easy runs zijn essentieel voor herstel. Ga niet te snel!\",\n  };\n}\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\nfunction calculateScheduledDate(startDate: Date, weekNumber: number, dayName: string): string {\n  const date = new Date(startDate);\n  const currentDay = date.getDay();\n  const targetDay = DAY_NAME_TO_NUMBER[dayName];\n\n  // Calculate days to add\n  let daysToAdd = (weekNumber - 1) * 7;\n  daysToAdd += (targetDay - currentDay + 7) % 7;\n\n  // If we're past the target day this week and it's week 1, move to next week\n  if (weekNumber === 1 && targetDay < currentDay) {\n    daysToAdd += 7;\n  }\n\n  date.setDate(date.getDate() + daysToAdd);\n\n  return date.toISOString().split(\"T\")[0];\n}\n\n","export {generateTrainingPlan as '408bfdbf9f6d976cfa20bd5c40b33f0b1d6ce52113'} from 'ACTIONS_MODULE0'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,1]}