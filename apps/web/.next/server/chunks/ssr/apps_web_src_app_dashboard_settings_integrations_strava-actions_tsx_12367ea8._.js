module.exports=[92319,a=>{"use strict";var b=a.i(98675),c=a.i(4023),d=a.i(78464);let e=(0,a.i(28761).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var f=a.i(80763),g=a.i(33901),h=a.i(39524),i=a.i(49377),j=a.i(21009);function k({isConnected:a}){let k=(0,g.useTranslations)("settings.integrations.strava"),l=(0,j.useRouter)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),q=async()=>{n(!0);try{let a=await fetch("/api/strava/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({days:30})}),b=await a.json();if(!a.ok)throw Error(b.error||"Sync failed");i.toast.success(b.message),l.refresh()}catch(a){console.error("Strava sync error:",a),i.toast.error(k("syncError"))}finally{n(!1)}},r=async()=>{p(!0);try{if(!(await fetch("/api/strava/disconnect",{method:"POST"})).ok)throw Error("Disconnect failed");i.toast.success(k("disconnected")),l.refresh()}catch(a){console.error("Strava disconnect error:",a),i.toast.error(k("disconnectError"))}finally{p(!1)}};return a?(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,b.jsxs)(h.Button,{size:"sm",onClick:q,disabled:m,children:[m?(0,b.jsx)(f.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(e,{className:"h-4 w-4 mr-2"}),m?k("syncing"):k("syncNow")]}),(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:r,disabled:o,children:[o?(0,b.jsx)(f.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):null,k("disconnect")]})]}):(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(h.Button,{size:"sm",asChild:!0,children:(0,b.jsxs)("a",{href:"/api/auth/strava?mode=connect",children:[(0,b.jsx)(d.Link2,{className:"h-4 w-4 mr-2"}),k("connectWith")]})})})}a.s(["StravaActions",()=>k],92319)}];

//# sourceMappingURL=apps_web_src_app_dashboard_settings_integrations_strava-actions_tsx_12367ea8._.js.map