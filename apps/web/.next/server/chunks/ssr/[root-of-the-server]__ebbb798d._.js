module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},34005,a=>{a.n(a.i(77930))},85517,a=>{a.n(a.i(63244))},28233,a=>{a.n(a.i(38545))},89412,a=>{a.n(a.i(93772))},50575,a=>{a.n(a.i(74137))},18579,a=>{a.n(a.i(47639))},82865,18489,8768,a=>{"use strict";let b=Symbol.for("constructDateFrom");function c(a,c){return"function"==typeof a?a(c):a&&"object"==typeof a&&b in a?a[b](c):a instanceof Date?new a.constructor(c):new Date(c)}function d(a,b){return c(b||a,a)}a.s(["constructFromSymbol",0,b,"millisecondsInDay",0,864e5,"millisecondsInWeek",0,6048e5],18489),a.s(["constructFrom",()=>c],8768),a.s(["toDate",()=>d],82865)},26291,a=>{"use strict";let b={};function c(){return b}a.s(["getDefaultOptions",()=>c])},3124,a=>{"use strict";var b=a.i(26291),c=a.i(82865);function d(a,d){let e=(0,b.getDefaultOptions)(),f=d?.weekStartsOn??d?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,g=(0,c.toDate)(a,d?.in),h=g.getDay();return g.setDate(g.getDate()-(7*(h<f)+h-f)),g.setHours(0,0,0,0),g}a.s(["startOfWeek",()=>d])},38906,65033,a=>{"use strict";var b=a.i(8768),c=a.i(82865);function d(a,d,e){var f;let g;return f=-d,g=(0,c.toDate)(a,e?.in),isNaN(f)?(0,b.constructFrom)(e?.in||a,NaN):(f&&g.setDate(g.getDate()+f),g)}a.s(["subDays",()=>d],38906);var e=a.i(26291);function f(a,b){let d=(0,e.getDefaultOptions)(),f=b?.weekStartsOn??b?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0,g=(0,c.toDate)(a,b?.in),h=g.getDay();return g.setDate(g.getDate()+((h<f?-7:0)+6-(h-f))),g.setHours(23,59,59,999),g}a.s(["endOfWeek",()=>f],65033)},68,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call SectionCards() from the server but SectionCards is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/section-cards.tsx <module evaluation>","SectionCards");a.s(["SectionCards",0,b])},35491,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call SectionCards() from the server but SectionCards is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/section-cards.tsx","SectionCards");a.s(["SectionCards",0,b])},78181,a=>{"use strict";a.i(68);var b=a.i(35491);a.n(b)},43879,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call TodayWorkout() from the server but TodayWorkout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/dashboard/today-workout.tsx <module evaluation>","TodayWorkout");a.s(["TodayWorkout",0,b])},49909,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call TodayWorkout() from the server but TodayWorkout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/dashboard/today-workout.tsx","TodayWorkout");a.s(["TodayWorkout",0,b])},29049,a=>{"use strict";a.i(43879);var b=a.i(49909);a.n(b)},4228,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call WeekOverview() from the server but WeekOverview is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/dashboard/week-overview.tsx <module evaluation>","WeekOverview");a.s(["WeekOverview",0,b])},7784,a=>{"use strict";let b=(0,a.i(19318).registerClientReference)(function(){throw Error("Attempted to call WeekOverview() from the server but WeekOverview is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/dashboard/week-overview.tsx","WeekOverview");a.s(["WeekOverview",0,b])},12602,a=>{"use strict";a.i(4228);var b=a.i(7784);a.n(b)},15450,a=>{"use strict";var b=a.i(89576),c=a.i(38906),d=a.i(3124),e=a.i(65033),f=a.i(78181),g=a.i(29049),h=a.i(12602),i=a.i(56624);async function j(){let a=await (0,i.createClient)(),{data:{user:j}}=await a.auth.getUser(),{data:k}=await a.from("training_plans").select("*").eq("user_id",j.id).eq("status","active").order("created_at",{ascending:!1}).limit(1),l=k?.[0]||null,m=new Date,n=(0,d.startOfWeek)(m,{weekStartsOn:1}),o=(0,e.endOfWeek)(m,{weekStartsOn:1}),p=(0,c.subDays)(n,7),q=(0,c.subDays)(n,1),r=m.toISOString().split("T")[0],{data:s}=l?await a.from("workouts").select("*").eq("plan_id",l.id).eq("scheduled_date",r).single():{data:null},{data:t}=l?await a.from("workouts").select("*").eq("plan_id",l.id).gte("scheduled_date",n.toISOString().split("T")[0]).lte("scheduled_date",o.toISOString().split("T")[0]).order("scheduled_date"):{data:[]},{data:u}=l?await a.from("workouts").select("*").eq("plan_id",l.id).gte("scheduled_date",p.toISOString().split("T")[0]).lte("scheduled_date",q.toISOString().split("T")[0]):{data:[]},{data:v}=await a.from("activities").select("*").eq("user_id",j.id).gte("started_at",n.toISOString()).lte("started_at",o.toISOString()),{data:w}=await a.from("activities").select("*").eq("user_id",j.id).gte("started_at",p.toISOString()).lte("started_at",q.toISOString()),x=(v?.reduce((a,b)=>a+(Number(b.distance_meters)||0),0)||0)/1e3,y=(v?.reduce((a,b)=>a+(b.duration_seconds||0),0)||0)/60,z=(w?.reduce((a,b)=>a+(Number(b.distance_meters)||0),0)||0)/1e3,A=(w?.reduce((a,b)=>a+(b.duration_seconds||0),0)||0)/60,B=t?.filter(a=>"completed"===a.status).reduce((a,b)=>a+(Number(b.target_distance_km)||0),0)||0,C=t?.filter(a=>"completed"===a.status).reduce((a,b)=>a+(b.target_duration_minutes||0),0)||0,D=u?.filter(a=>"completed"===a.status).reduce((a,b)=>a+(Number(b.target_distance_km)||0),0)||0,E=u?.filter(a=>"completed"===a.status).reduce((a,b)=>a+(b.target_duration_minutes||0),0)||0,F=x>0?x:B,G=y>0?y:C,H=z>0?z:D,I=A>0?A:E,J=H>0?Math.round((F-H)/H*100):0,K=I>0?Math.round((G-I)/I*100):0,L=t?.filter(a=>"completed"===a.status).length||0,M=t?.length||0,N=(0,c.subDays)(m,30),{data:O}=await a.from("workouts").select("scheduled_date, status").eq("user_id",j.id).eq("status","completed").gte("scheduled_date",N.toISOString().split("T")[0]).order("scheduled_date",{ascending:!1}),{data:P}=await a.from("activities").select("started_at").eq("user_id",j.id).gte("started_at",N.toISOString()),Q=new Set;O?.forEach(a=>Q.add(a.scheduled_date)),P?.forEach(a=>{let b=new Date(a.started_at).toISOString().split("T")[0];Q.add(b)});let R=0,S=new Date(m);for(Q.has(r)||(S=(0,c.subDays)(m,1));;){let a=S.toISOString().split("T")[0];if(Q.has(a))R++,S=(0,c.subDays)(S,1);else break}let T={weeklyDistance:Number(F.toFixed(1)),weeklyDistanceChange:J,weeklyTime:Math.round(G),weeklyTimeChange:K,completedWorkouts:L,totalWorkouts:M>0?M:1,streak:R};return(0,b.jsxs)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:[(0,b.jsx)(f.SectionCards,{stats:T,hasPlan:!!l}),(0,b.jsxs)("div",{className:"grid gap-4 px-4 lg:px-6 lg:grid-cols-2",children:[(0,b.jsx)(g.TodayWorkout,{workout:s,hasPlan:!!l}),(0,b.jsx)(h.WeekOverview,{workouts:t||[],hasPlan:!!l})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ebbb798d._.js.map