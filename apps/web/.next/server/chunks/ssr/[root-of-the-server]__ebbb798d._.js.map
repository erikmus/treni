{"version":3,"sources":["../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/constants.js","../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/constructFrom.js","../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/toDate.js","../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/_lib/defaultOptions.js","../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/startOfWeek.js","../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/addDays.js","../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/subDays.js","../../../../../../node_modules/.pnpm/date-fns%404.1.0/node_modules/date-fns/endOfWeek.js","../../../../../../apps/web/src/components/section-cards.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/src/components/dashboard/today-workout.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/src/components/dashboard/week-overview.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/src/app/dashboard/page.tsx"],"sourcesContent":["/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occurs every 4 years, except for years that are divisible by 100 and not divisible by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n\n/**\n * @constant\n * @name constructFromSymbol\n * @summary Symbol enabling Date extensions to inherit properties from the reference date.\n *\n * The symbol is used to enable the `constructFrom` function to construct a date\n * using a reference date and a value. It allows to transfer extra properties\n * from the reference date to the new date. It's useful for extensions like\n * [`TZDate`](https://github.com/date-fns/tz) that accept a time zone as\n * a constructor argument.\n */\nexport const constructFromSymbol = Symbol.for(\"constructDateFrom\");\n","import { constructFromSymbol } from \"./constants.js\";\n\n/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * Starting from v3.7.0, it allows to construct a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from \"./constructFrom/date-fns\";\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date>(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use constructor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   );\n * }\n */\nexport function constructFrom(date, value) {\n  if (typeof date === \"function\") return date(value);\n\n  if (date && typeof date === \"object\" && constructFromSymbol in date)\n    return date[constructFromSymbol](value);\n\n  if (date instanceof Date) return new date.constructor(value);\n\n  return new Date(value);\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * Starting from v3.7.0, it clones a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument, context) {\n  // [TODO] Get rid of `toDate` or `constructFrom`?\n  return constructFrom(context || argument, argument);\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","let defaultOptions = {};\n\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\n\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addDays} function options.\n */\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n * @param options - An object with options\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n\n  // If 0 days, no-op to avoid changing times in the hour before end of DST\n  if (!amount) return _date;\n\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;\n","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link subDays} function options.\n */\n\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the days subtracted\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport function subDays(date, amount, options) {\n  return addDays(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subDays;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfWeek} function options.\n */\n\n/**\n * @name endOfWeek\n * @category Week Helpers\n * @summary Return the end of a week for the given date.\n *\n * @description\n * Return the end of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a week\n *\n * @example\n * // The end of a week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sat Sep 06 2014 23:59:59.999\n *\n * @example\n * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Sun Sep 07 2014 23:59:59.999\n */\nexport function endOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);\n\n  _date.setDate(_date.getDate() + diff);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfWeek;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SectionCards = registerClientReference(\n    function() { throw new Error(\"Attempted to call SectionCards() from the server but SectionCards is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/section-cards.tsx\",\n    \"SectionCards\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const TodayWorkout = registerClientReference(\n    function() { throw new Error(\"Attempted to call TodayWorkout() from the server but TodayWorkout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/dashboard/today-workout.tsx\",\n    \"TodayWorkout\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const WeekOverview = registerClientReference(\n    function() { throw new Error(\"Attempted to call WeekOverview() from the server but WeekOverview is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/dashboard/week-overview.tsx\",\n    \"WeekOverview\",\n);\n","import { subDays, startOfWeek, endOfWeek } from \"date-fns\"\nimport { SectionCards } from \"@/components/section-cards\"\nimport { TodayWorkout } from \"@/components/dashboard/today-workout\"\nimport { WeekOverview } from \"@/components/dashboard/week-overview\"\nimport { createClient } from \"@/lib/supabase/server\"\n\nexport default async function DashboardPage() {\n  const supabase = await createClient()\n  \n  const { data: { user } } = await supabase.auth.getUser()\n\n  // Fetch active training plan (most recent if multiple)\n  const { data: activePlans } = await supabase\n    .from(\"training_plans\")\n    .select(\"*\")\n    .eq(\"user_id\", user!.id)\n    .eq(\"status\", \"active\")\n    .order(\"created_at\", { ascending: false })\n    .limit(1)\n  \n  const activePlan = activePlans?.[0] || null\n\n  // Get dates for this week and last week\n  const now = new Date()\n  const thisWeekStart = startOfWeek(now, { weekStartsOn: 1 }) // Monday\n  const thisWeekEnd = endOfWeek(now, { weekStartsOn: 1 }) // Sunday\n  const lastWeekStart = subDays(thisWeekStart, 7)\n  const lastWeekEnd = subDays(thisWeekStart, 1)\n\n  const today = now.toISOString().split(\"T\")[0]\n\n  // Fetch today's workout if there's an active plan\n  const { data: todayWorkout } = activePlan ? await supabase\n    .from(\"workouts\")\n    .select(\"*\")\n    .eq(\"plan_id\", activePlan.id)\n    .eq(\"scheduled_date\", today)\n    .single() : { data: null }\n\n  // Fetch this week's workouts\n  const { data: weekWorkouts } = activePlan ? await supabase\n    .from(\"workouts\")\n    .select(\"*\")\n    .eq(\"plan_id\", activePlan.id)\n    .gte(\"scheduled_date\", thisWeekStart.toISOString().split(\"T\")[0])\n    .lte(\"scheduled_date\", thisWeekEnd.toISOString().split(\"T\")[0])\n    .order(\"scheduled_date\") : { data: [] }\n\n  // Fetch last week's workouts for comparison\n  const { data: lastWeekWorkouts } = activePlan ? await supabase\n    .from(\"workouts\")\n    .select(\"*\")\n    .eq(\"plan_id\", activePlan.id)\n    .gte(\"scheduled_date\", lastWeekStart.toISOString().split(\"T\")[0])\n    .lte(\"scheduled_date\", lastWeekEnd.toISOString().split(\"T\")[0]) : { data: [] }\n\n  // Fetch activities for this week\n  const { data: thisWeekActivities } = await supabase\n    .from(\"activities\")\n    .select(\"*\")\n    .eq(\"user_id\", user!.id)\n    .gte(\"started_at\", thisWeekStart.toISOString())\n    .lte(\"started_at\", thisWeekEnd.toISOString())\n\n  // Fetch activities for last week\n  const { data: lastWeekActivities } = await supabase\n    .from(\"activities\")\n    .select(\"*\")\n    .eq(\"user_id\", user!.id)\n    .gte(\"started_at\", lastWeekStart.toISOString())\n    .lte(\"started_at\", lastWeekEnd.toISOString())\n\n  // Calculate stats from activities (if available) or workouts\n  const thisWeekDistanceFromActivities = (thisWeekActivities?.reduce(\n    (sum, a) => sum + (Number(a.distance_meters) || 0), 0\n  ) || 0) / 1000\n\n  const thisWeekTimeFromActivities = (thisWeekActivities?.reduce(\n    (sum, a) => sum + (a.duration_seconds || 0), 0\n  ) || 0) / 60\n\n  const lastWeekDistanceFromActivities = (lastWeekActivities?.reduce(\n    (sum, a) => sum + (Number(a.distance_meters) || 0), 0\n  ) || 0) / 1000\n\n  const lastWeekTimeFromActivities = (lastWeekActivities?.reduce(\n    (sum, a) => sum + (a.duration_seconds || 0), 0\n  ) || 0) / 60\n\n  // If no activities, use planned workout data\n  const thisWeekDistanceFromWorkouts = (weekWorkouts?.filter(w => w.status === \"completed\").reduce(\n    (sum, w) => sum + (Number(w.target_distance_km) || 0), 0\n  ) || 0)\n\n  const thisWeekTimeFromWorkouts = (weekWorkouts?.filter(w => w.status === \"completed\").reduce(\n    (sum, w) => sum + (w.target_duration_minutes || 0), 0\n  ) || 0)\n\n  const lastWeekDistanceFromWorkouts = (lastWeekWorkouts?.filter(w => w.status === \"completed\").reduce(\n    (sum, w) => sum + (Number(w.target_distance_km) || 0), 0\n  ) || 0)\n\n  const lastWeekTimeFromWorkouts = (lastWeekWorkouts?.filter(w => w.status === \"completed\").reduce(\n    (sum, w) => sum + (w.target_duration_minutes || 0), 0\n  ) || 0)\n\n  // Use activities if available, otherwise use completed workouts\n  const thisWeekDistance = thisWeekDistanceFromActivities > 0 \n    ? thisWeekDistanceFromActivities \n    : thisWeekDistanceFromWorkouts\n\n  const thisWeekTime = thisWeekTimeFromActivities > 0 \n    ? thisWeekTimeFromActivities \n    : thisWeekTimeFromWorkouts\n\n  const lastWeekDistance = lastWeekDistanceFromActivities > 0 \n    ? lastWeekDistanceFromActivities \n    : lastWeekDistanceFromWorkouts\n\n  const lastWeekTime = lastWeekTimeFromActivities > 0 \n    ? lastWeekTimeFromActivities \n    : lastWeekTimeFromWorkouts\n\n  // Calculate percentage changes\n  const distanceChange = lastWeekDistance > 0 \n    ? Math.round(((thisWeekDistance - lastWeekDistance) / lastWeekDistance) * 100)\n    : 0\n\n  const timeChange = lastWeekTime > 0 \n    ? Math.round(((thisWeekTime - lastWeekTime) / lastWeekTime) * 100)\n    : 0\n\n  // Count completed workouts this week\n  const completedThisWeek = weekWorkouts?.filter(w => w.status === \"completed\").length || 0\n  const totalThisWeek = weekWorkouts?.length || 0\n\n  // Calculate streak - count consecutive days with completed workouts or activities\n  // For simplicity, count this from completed workouts in the last 30 days\n  const thirtyDaysAgo = subDays(now, 30)\n  const { data: recentWorkouts } = await supabase\n    .from(\"workouts\")\n    .select(\"scheduled_date, status\")\n    .eq(\"user_id\", user!.id)\n    .eq(\"status\", \"completed\")\n    .gte(\"scheduled_date\", thirtyDaysAgo.toISOString().split(\"T\")[0])\n    .order(\"scheduled_date\", { ascending: false })\n\n  const { data: recentActivities } = await supabase\n    .from(\"activities\")\n    .select(\"started_at\")\n    .eq(\"user_id\", user!.id)\n    .gte(\"started_at\", thirtyDaysAgo.toISOString())\n\n  // Build set of dates with activity\n  const activeDates = new Set<string>()\n  recentWorkouts?.forEach(w => activeDates.add(w.scheduled_date))\n  recentActivities?.forEach(a => {\n    const date = new Date(a.started_at).toISOString().split(\"T\")[0]\n    activeDates.add(date)\n  })\n\n  // Calculate streak\n  let streak = 0\n  let checkDate = new Date(now)\n  \n  // If today hasn't happened yet, start from yesterday\n  if (!activeDates.has(today)) {\n    checkDate = subDays(now, 1)\n  }\n\n  while (true) {\n    const dateStr = checkDate.toISOString().split(\"T\")[0]\n    if (activeDates.has(dateStr)) {\n      streak++\n      checkDate = subDays(checkDate, 1)\n    } else {\n      break\n    }\n  }\n\n  const stats = {\n    weeklyDistance: Number(thisWeekDistance.toFixed(1)),\n    weeklyDistanceChange: distanceChange,\n    weeklyTime: Math.round(thisWeekTime),\n    weeklyTimeChange: timeChange,\n    completedWorkouts: completedThisWeek,\n    totalWorkouts: totalThisWeek > 0 ? totalThisWeek : 1, // Prevent division by zero\n    streak,\n  }\n\n  return (\n    <div className=\"flex flex-col gap-4 py-4 md:gap-6 md:py-6\">\n      <SectionCards stats={stats} hasPlan={!!activePlan} />\n      \n      <div className=\"grid gap-4 px-4 lg:px-6 lg:grid-cols-2\">\n        <TodayWorkout \n          workout={todayWorkout} \n          hasPlan={!!activePlan}\n        />\n        <WeekOverview \n          workouts={weekWorkouts || []} \n          hasPlan={!!activePlan}\n        />\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}