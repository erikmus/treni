module.exports=[78060,a=>{"use strict";let b=(0,a.i(28761).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},85858,a=>{"use strict";let b=(0,a.i(28761).default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);a.s(["Timer",()=>b],85858)},85104,a=>{"use strict";var b=a.i(98675),c=a.i(4023);let d=(0,a.i(28761).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var e=a.i(85858),f=a.i(78060),f=f,g=a.i(76899),h=a.i(51444),i=a.i(760);let j=[{key:"500m",label:"500m",meters:500},{key:"1km",label:"1 km",meters:1e3},{key:"2km",label:"2 km",meters:2e3},{key:"5km",label:"5 km",meters:5e3},{key:"10km",label:"10 km",meters:1e4},{key:"15km",label:"15 km",meters:15e3},{key:"10mile",label:"10 mijl",meters:16093.4},{key:"20km",label:"20 km",meters:2e4},{key:"half",label:"Halve marathon",meters:21097.5},{key:"marathon",label:"Marathon",meters:42195}],k=[{value:"30days",label:"30 dagen"},{value:"thisYear",label:"Dit jaar"},{value:"allTime",label:"Aller tijden"}];function l({userId:a}){let[l,m]=(0,c.useState)("30days"),[n,o]=(0,c.useState)(new Map),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),t=(0,c.useCallback)(async()=>{q(!0);let b=(0,h.createClient)().from("activities").select("id, distance_meters, duration_seconds, splits_data, started_at").eq("user_id",a).eq("activity_type","run").not("splits_data","is",null).order("started_at",{ascending:!1});if("30days"===l){let a=new Date;a.setDate(a.getDate()-30),b=b.gte("started_at",a.toISOString())}else if("thisYear"===l){let a=new Date(new Date().getFullYear(),0,1);b=b.gte("started_at",a.toISOString())}let{data:c,error:d}=await b;if(d||!c){console.error("Error fetching activities:",d),q(!1);return}let e=new Map;for(let a of j){let b=function(a,b){let c=null;for(let d of a){if(Number(d.distance_meters)<.95*b)continue;let a=d.splits_data?.splits;if(!a||0===a.length)continue;if(500===b){let b=a.filter(a=>a.distanceMeters>=900);if(0===b.length)continue;let e=b.reduce((a,b)=>b.durationSeconds<a.durationSeconds?b:a,b[0]).durationSeconds/2*.98;(!c||e<c.timeSeconds)&&(c={distanceKey:"500m",timeSeconds:e,activityId:d.id,activityDate:d.started_at});continue}if(1e3===b){let b=a.filter(a=>a.distanceMeters>=900).reduce((a,b)=>b.durationSeconds<a.durationSeconds?b:a,a.filter(a=>a.distanceMeters>=900)[0]);b&&(!c||b.durationSeconds<c.timeSeconds)&&(c={distanceKey:"1km",timeSeconds:b.durationSeconds,activityId:d.id,activityDate:d.started_at});continue}let e=Math.ceil(b/1e3),f=a.filter(a=>a.distanceMeters>=900);if(!(f.length<e))for(let a=0;a<=f.length-e;a++){let g=f.slice(a,a+e),h=g.reduce((a,b)=>a+b.durationSeconds,0),i=g.reduce((a,b)=>a+b.distanceMeters,0);b%1e3!=0&&(h*=b/i),(!c||h<c.timeSeconds)&&(c={distanceKey:b.toString(),timeSeconds:h,activityId:d.id,activityDate:d.started_at})}}return c}(c,a.meters);b&&e.set(a.key,b)}o(e),q(!1)},[a,l]);(0,c.useEffect)(()=>{t()},[t]);let u=k.find(a=>a.value===l)?.label;return(0,b.jsxs)("div",{className:"bg-card rounded-xl border p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"font-semibold flex items-center gap-2",children:[(0,b.jsx)(d,{className:"h-5 w-5 text-amber-500"}),"Persoonlijke Records"]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>s(!r),className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg border bg-background hover:bg-accent transition-colors",children:[u,(0,b.jsx)(f.default,{className:(0,i.cn)("h-4 w-4 transition-transform",r&&"rotate-180")})]}),r&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),(0,b.jsx)("div",{className:"absolute right-0 top-full mt-1 z-20 min-w-[140px] rounded-lg border bg-popover p-1 shadow-lg",children:k.map(a=>(0,b.jsxs)("button",{onClick:()=>{m(a.value),s(!1)},className:(0,i.cn)("w-full flex items-center justify-between px-3 py-2 text-sm rounded-md hover:bg-accent transition-colors",l===a.value&&"bg-accent"),children:[a.label,l===a.value&&(0,b.jsx)(g.Check,{className:"h-4 w-4 text-primary"})]},a.value))})]})]})]}),p?(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3,4].map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 w-16 bg-muted rounded"}),(0,b.jsx)("div",{className:"h-4 w-20 bg-muted rounded"})]},a))}):0===n.size?(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Voltooi wat trainingen om je records te zien."}):(0,b.jsx)("div",{className:"space-y-1",children:j.map(a=>{var c;let d,f,g,h=n.get(a.key);return(0,b.jsxs)("div",{className:(0,i.cn)("flex items-center justify-between py-2.5 border-b border-border/50 last:border-0",!h&&"opacity-40"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,i.cn)("flex items-center justify-center w-8 h-8 rounded-lg text-xs font-medium",h?"bg-amber-500/10 text-amber-600 dark:text-amber-400":"bg-muted text-muted-foreground"),children:(0,b.jsx)(e.Timer,{className:"h-4 w-4"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:a.label})]}),(0,b.jsx)("span",{className:(0,i.cn)("font-mono text-sm",h?"font-semibold":"text-muted-foreground"),children:h?(d=Math.floor((c=h.timeSeconds)/3600),f=Math.floor(c%3600/60),g=Math.round(c%60),d>0?`${d}:${f.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`:`${f}:${g.toString().padStart(2,"0")}`):"â€”"})]},a.key)})})]})}a.s(["PersonalRecords",()=>l],85104)}];

//# sourceMappingURL=_463292b3._.js.map