(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50439,s=>{"use strict";var e=s.i(10935),r=s.i(25139),t=s.i(39462);let a=(0,s.i(191).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var i=s.i(38144),n=s.i(91193),o=s.i(85902),c=s.i(79342),l=s.i(30954);function d({isConnected:s}){let d=(0,n.useTranslations)("settings.integrations.strava"),h=(0,l.useRouter)(),[m,u]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),v=async()=>{u(!0);try{let s=await fetch("/api/strava/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({days:30})}),e=await s.json();if(!s.ok)throw Error(e.error||"Sync failed");c.toast.success(e.message),h.refresh()}catch(s){console.error("Strava sync error:",s),c.toast.error(d("syncError"))}finally{u(!1)}},p=async()=>{f(!0);try{if(!(await fetch("/api/strava/disconnect",{method:"POST"})).ok)throw Error("Disconnect failed");c.toast.success(d("disconnected")),h.refresh()}catch(s){console.error("Strava disconnect error:",s),c.toast.error(d("disconnectError"))}finally{f(!1)}};return s?(0,e.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,e.jsxs)(o.Button,{size:"sm",onClick:v,disabled:m,children:[m?(0,e.jsx)(i.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,e.jsx)(a,{className:"h-4 w-4 mr-2"}),m?d("syncing"):d("syncNow")]}),(0,e.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:p,disabled:y,children:[y?(0,e.jsx)(i.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):null,d("disconnect")]})]}):(0,e.jsx)("div",{className:"mt-4",children:(0,e.jsx)(o.Button,{size:"sm",asChild:!0,children:(0,e.jsxs)("a",{href:"/api/auth/strava?mode=connect",children:[(0,e.jsx)(t.Link2,{className:"h-4 w-4 mr-2"}),d("connectWith")]})})})}s.s(["StravaActions",()=>d],50439)}]);