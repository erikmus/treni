(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19716,e=>{"use strict";let t=(0,e.i(191).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>t])},48147,e=>{"use strict";let t=(0,e.i(191).default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);e.s(["Timer",()=>t],48147)},54633,e=>{"use strict";var t=e.i(10935),a=e.i(25139);let s=(0,e.i(191).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var i=e.i(48147),r=e.i(19716),r=r,l=e.i(44673),n=e.i(67594),d=e.i(52088);let c=[{key:"500m",label:"500m",meters:500},{key:"1km",label:"1 km",meters:1e3},{key:"2km",label:"2 km",meters:2e3},{key:"5km",label:"5 km",meters:5e3},{key:"10km",label:"10 km",meters:1e4},{key:"15km",label:"15 km",meters:15e3},{key:"10mile",label:"10 mijl",meters:16093.4},{key:"20km",label:"20 km",meters:2e4},{key:"half",label:"Halve marathon",meters:21097.5},{key:"marathon",label:"Marathon",meters:42195}],o=[{value:"30days",label:"30 dagen"},{value:"thisYear",label:"Dit jaar"},{value:"allTime",label:"Aller tijden"}];function m({userId:e}){let[m,u]=(0,a.useState)("30days"),[f,x]=(0,a.useState)(new Map),[y,b]=(0,a.useState)(!0),[h,g]=(0,a.useState)(!1),v=(0,a.useCallback)(async()=>{b(!0);let t=(0,n.createClient)().from("activities").select("id, distance_meters, duration_seconds, splits_data, started_at").eq("user_id",e).eq("activity_type","run").not("splits_data","is",null).order("started_at",{ascending:!1});if("30days"===m){let e=new Date;e.setDate(e.getDate()-30),t=t.gte("started_at",e.toISOString())}else if("thisYear"===m){let e=new Date(new Date().getFullYear(),0,1);t=t.gte("started_at",e.toISOString())}let{data:a,error:s}=await t;if(s||!a){console.error("Error fetching activities:",s),b(!1);return}let i=new Map;for(let e of c){let t=function(e,t){let a=null;for(let s of e){if(Number(s.distance_meters)<.95*t)continue;let e=s.splits_data?.splits;if(!e||0===e.length)continue;if(500===t){let t=e.filter(e=>e.distanceMeters>=900);if(0===t.length)continue;let i=t.reduce((e,t)=>t.durationSeconds<e.durationSeconds?t:e,t[0]).durationSeconds/2*.98;(!a||i<a.timeSeconds)&&(a={distanceKey:"500m",timeSeconds:i,activityId:s.id,activityDate:s.started_at});continue}if(1e3===t){let t=e.filter(e=>e.distanceMeters>=900).reduce((e,t)=>t.durationSeconds<e.durationSeconds?t:e,e.filter(e=>e.distanceMeters>=900)[0]);t&&(!a||t.durationSeconds<a.timeSeconds)&&(a={distanceKey:"1km",timeSeconds:t.durationSeconds,activityId:s.id,activityDate:s.started_at});continue}let i=Math.ceil(t/1e3),r=e.filter(e=>e.distanceMeters>=900);if(!(r.length<i))for(let e=0;e<=r.length-i;e++){let l=r.slice(e,e+i),n=l.reduce((e,t)=>e+t.durationSeconds,0),d=l.reduce((e,t)=>e+t.distanceMeters,0);t%1e3!=0&&(n*=t/d),(!a||n<a.timeSeconds)&&(a={distanceKey:t.toString(),timeSeconds:n,activityId:s.id,activityDate:s.started_at})}}return a}(a,e.meters);t&&i.set(e.key,t)}x(i),b(!1)},[e,m]);(0,a.useEffect)(()=>{v()},[v]);let p=o.find(e=>e.value===m)?.label;return(0,t.jsxs)("div",{className:"bg-card rounded-xl border p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h2",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(s,{className:"h-5 w-5 text-amber-500"}),"Persoonlijke Records"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>g(!h),className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg border bg-background hover:bg-accent transition-colors",children:[p,(0,t.jsx)(r.default,{className:(0,d.cn)("h-4 w-4 transition-transform",h&&"rotate-180")})]}),h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),(0,t.jsx)("div",{className:"absolute right-0 top-full mt-1 z-20 min-w-[140px] rounded-lg border bg-popover p-1 shadow-lg",children:o.map(e=>(0,t.jsxs)("button",{onClick:()=>{u(e.value),g(!1)},className:(0,d.cn)("w-full flex items-center justify-between px-3 py-2 text-sm rounded-md hover:bg-accent transition-colors",m===e.value&&"bg-accent"),children:[e.label,m===e.value&&(0,t.jsx)(l.Check,{className:"h-4 w-4 text-primary"})]},e.value))})]})]})]}),y?(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 w-16 bg-muted rounded"}),(0,t.jsx)("div",{className:"h-4 w-20 bg-muted rounded"})]},e))}):0===f.size?(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Voltooi wat trainingen om je records te zien."}):(0,t.jsx)("div",{className:"space-y-1",children:c.map(e=>{var a;let s,r,l,n=f.get(e.key);return(0,t.jsxs)("div",{className:(0,d.cn)("flex items-center justify-between py-2.5 border-b border-border/50 last:border-0",!n&&"opacity-40"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,d.cn)("flex items-center justify-center w-8 h-8 rounded-lg text-xs font-medium",n?"bg-amber-500/10 text-amber-600 dark:text-amber-400":"bg-muted text-muted-foreground"),children:(0,t.jsx)(i.Timer,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.label})]}),(0,t.jsx)("span",{className:(0,d.cn)("font-mono text-sm",n?"font-semibold":"text-muted-foreground"),children:n?(s=Math.floor((a=n.timeSeconds)/3600),r=Math.floor(a%3600/60),l=Math.round(a%60),s>0?`${s}:${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`:`${r}:${l.toString().padStart(2,"0")}`):"â€”"})]},e.key)})})]})}e.s(["PersonalRecords",()=>m],54633)}]);